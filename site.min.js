/*! checkers 2018-12-07 */

function Game(){var e=[],t=[],i=[];this.game=[],this.turn="w",this.state="selectPiece",this.selectedPiece=null;for(var s=0;s<8;s++){var c=new Piece(s,s%2,"w"),n=new Piece(s,s%2+6,"b");e.push(c),t.push(n);for(var h=0;h<8;h++){var r=new Square(s,h,this);i.push(r),h===s%2?this.game[s.toString()+h.toString()]=c:h===s%2+6&&(this.game[s.toString()+h.toString()]=n)}}}function Piece(e,t,i){var s=e,c=i;this.c=t,this.r=e,this.king=!1,this.html='<div class="piece '+c+'piece" id="'+c+"piece"+s+'"></div>',this.getTeam=function(){return c}}function Square(e,t,i){var s=this,c=e,n=t;this.game=i;var h="#sq"+c.toString()+n.toString();$(h).click(function(){s.game.hit(c,n)})}Game.prototype.hit=function(e,t){var i=e.toString()+t.toString();"selectPiece"===this.state&&void 0!==this.game[i]&&this.game[i].getTeam()===this.turn?(this.selectedPiece=this.game[i],this.state="selectMove"):"selectMove"===this.state&&void 0===this.game[i]&&(this.moveSelectedPiece(e,t),this.selectedPiece=null,this.state="selectPiece")},Game.prototype.moveSelectedPiece=function(e,t){delete this.game[this.selectedPiece.r.toString()+this.selectedPiece.c.toString()];var i=e.toString()+t.toString(),s=document.getElementById("sq"+i);document.getElementById("sq"+this.selectedPiece.r.toString()+this.selectedPiece.c.toString()).innerHTML="",s.innerHTML=this.selectedPiece.html,this.selectedPiece.c=t,this.selectedPiece.r=e,this.game[i]=this.selectedPiece,"w"===this.turn?this.turn="b":this.turn="w"},Piece.prototype.move=function(e,t){this.c=e,this.r=t},Piece.prototype.getLoc=function(){return[this.c,this.r]};